<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <script src="https://code.jquery.com/jquery-3.7.1.slim.js"
            integrity="sha256-UgvvN8vBkgO0luPSUl2s8TIlOSYRoGFAX4jlCIm9Adc=" crossorigin="anonymous"></script>
    <title>Document</title>
    <link rel="stylesheet" href="../../css/format.css"/>
    <link rel="stylesheet" href="../../css/employment.css"/> 
</head>
<body id="content-wrapper">
<div th:insert="~{common/header :: header}"></div>
<div th:insert="~{common/title :: title ('수강생 취업률 관리')}"></div>
<section id="employment-contents">
    <article id="employment-search-btn-wrapper">
        <div class="search-form-wrapper">
            <select name="employment-courseId-filter"
                    class="employment-courseId-filter">
                <option value="course-number" id="course-number">기수</option>
            </select>
            <button type="button" class="board-filter-search-btn">검색</button>
        </div>
        <div class="employment-btn-wrapper">
            <button type="button" id="settlement-btn" class="btn-setting" popovertarget="settlementListModal">
                저장
            </button>
        </div>
    </article>
    <article class="employment-page-information">
        <div class="employment-cnt-pages">
        </div>
    </article>
    <section id="employment-contents">
        <article>
          <div id="employmentBoard-table">
            <table class="employmentBoard-table">
              <thead>
                <tr>
                  <th>
                    <input type="checkbox" name="" id="title-checkbox" />
                  </th>
                  <th><span>hrd-net-id</span></th>
                  <th><span>기수</span></th>
                  <th><span>이름</span></th>
                  <th><span>전화번호</span></th>
                  <th><span>이메일</span></th>
                  <th><span>과정종료일</span></th>
                  <th><span>취업처</span></th>
                  <th><span>취업 여부</span></th>
                </tr>
              </thead>
              <tbody id="employment-table-contents"></tbody>
            </table>
          </div>
        </article>
      </section>
        <article class="employment-page-information">
            <ul id="pagination">
                <li>
                    <a class="page-link" id="before">
                        이전
                    </a>
                </li>
                <!--// 이게 페이지 번호-->
                <ul class="page-item" id="page_number">
                </ul>
                <li class="page-item">
                    <a class="page-link" id="next">
                        다음
                    </a>
                </li>
            </ul>
            </div>
        </article>
</section>
<footer></footer>
<script>



 $(".board-filter-search-btn").on("click", async function () {
      let courseSeq =$(".employment-courseId-filter option:selected").text();
      try {
        const response = await fetch("/employments/info-list?courseSeq=" + courseSeq + "&page=" + 1, {
          method: "GET" // 불필요한 Content-Type 헤더 제거
        });
        if (!response.ok) {
          throw new Error(`HTTP 오류! 상태: ${response.status}`);
        }
        const data = await response.json();
        const notificationList = data.result;
        console.log(notificationList);
        await getSettlementList(notificationList);
      } catch (error) {
        console.error("공지 사항 페치 오류:", error);
      }

    });


</script>
</body>
<script type="text/javascript" th:src="@{/scripts/employmentBoard.js}">

</script>
</html>
